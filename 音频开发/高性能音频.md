# 高性能音频



### 音频流内部缓冲区

该缓冲区是在音频设备中进行维护的 , AAudio 音频流会先将数据传入该缓冲区 , 然后才进行播放 ;

**BufferSizeInFrames**

每帧的样本数就是通道数 , 单声道每帧 1 个样本 , 立体声 每帧 2 个样本 , 每个样本的大小与样本格式有关 , 16 位样本 每个样本 2 字节 ;

### 音频数据读写缓冲区

是在内存中维护的 , 其本质就是一个 void\* 类型的数组 , 其数组字节大小由用户设定 ;





采集的样本缓冲区大小 :

- ① 帧 : numFrames 单位是帧 ;
- ② 样本数 : 每帧的样本数 等于 通道数 , 如果是单声道 每帧有 1 个样本 , 如果是立体声 , 每帧有 2 个样本 ;
- ③ 每个样本字节数 : AAUDIO_FORMAT_PCM_I16 每个样本 2 字节 , AAUDIO_FORMAT_PCM_FLOAT 每个样本 4 字节 ;
- ④ 立体声 16 位整形采样 : AAudio 中每个样本都有指定的个数 , 16 位整形样本 AAUDIO_FORMAT_PCM_I16 代表 16 位采样 , 每个样本有 两个字节 , 那么需要采集的样本缓冲区大小为 n u m F r a m e s × 2 × 2 numFrames \times 2 \times 2\*n\**u\**m\**F\**r\**a\**m\**e\**s\*×2×2 个样本 ;





https://hanshuliang.blog.csdn.net/article/details/109490886